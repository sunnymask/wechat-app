webpackJsonp([8],{"06Ng":function(e,t,o){var s=o("L4zZ");(e.exports=o("UTlt")(!1)).push([e.i,".area .form-control[data-v-3c562007]{padding:0 .34rem}.right-arr[data-v-3c562007]{background:url("+s(o("VEeA"))+") no-repeat 100%;background-size:.24rem .24rem}.content[data-v-3c562007]{margin-top:.2rem;padding-bottom:1.2rem;background:#fff}.tab[data-v-3c562007]{border-bottom:1px solid #e5e5e5}.choose-tab[data-v-3c562007]{width:50%;text-align:center;padding:.43rem 0 .45rem}.choose-tab>span[data-v-3c562007]{font-size:.24rem;padding-left:.34rem;background:url("+s(o("Qo9Y"))+") no-repeat 0;background-size:.24rem auto}.choose-tab>span.on[data-v-3c562007]{background:url("+s(o("fItf"))+") no-repeat 0;background-size:.24rem auto}.area-head[data-v-3c562007]{padding:.34rem .44rem 0 .32rem}.area-head>p[data-v-3c562007]{font-size:.3rem}.area-head>section>button[data-v-3c562007]{padding:.05rem .1rem;border-radius:3px;font-size:.22rem;background:#ea3f3f;margin-left:.12rem}.all-machine[data-v-3c562007]{font-size:.26rem;padding:.27rem .32rem 0}.area-all[data-v-3c562007]{padding:.07rem 0 .22rem;border-bottom:1px solid #e5e5e5}.num-box[data-v-3c562007]{padding:.32rem}.num-box>p[data-v-3c562007]{width:.5rem;height:.5rem;text-align:center;line-height:.5rem}.num-input[data-v-3c562007]{width:.8rem;height:.5rem;text-align:center;padding:0 .02rem;border:1px solid #e5e5e5}.area-show-box[data-v-3c562007]{position:absolute;bottom:0;width:100%;background:#fff;padding-bottom:1.2rem}.show-box-head[data-v-3c562007]{padding:0 .3rem;border-bottom:1px solid #e5e5e5}.show-box-head>p[data-v-3c562007]{font-size:.3rem}.close-btn[data-v-3c562007]{width:.6rem;height:1.06rem;background:url("+s(o("YBvg"))+") no-repeat .16rem;background-size:.44rem .44rem}.show-box-list[data-v-3c562007]{padding:0 .3rem}.show-machine-li[data-v-3c562007]{padding:.36rem 0 .35rem;font-size:.3rem;background:url("+s(o("3yGI"))+") no-repeat 100%;background-size:.32rem auto;border-bottom:1px solid #e5e5e5}.show-machine-li.on[data-v-3c562007]{background:url("+s(o("ht47"))+") no-repeat 100%;background-size:.32rem auto}.show-footer[data-v-3c562007]{position:absolute;bottom:0;left:0;width:100%}.show-footer>button[data-v-3c562007]{width:50%;height:1rem;font-size:.34rem}.foot-close[data-v-3c562007]{background:#eee}.foot-delete[data-v-3c562007]{background:#ea3f3f}.scan-area[data-v-3c562007]{padding:0 .2rem}.scan-area>section[data-v-3c562007]{-webkit-box-flex:1;-ms-flex:1;flex:1}.scan-btn[data-v-3c562007]{width:100%;display:block;font-size:.3rem;height:.62rem;padding:0 .64rem 0 .16rem;line-height:.62rem;border-radius:.31rem;background:#eee}.scanBt[data-v-3c562007]{position:absolute;top:50%;left:78%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:.3rem;height:.3rem;background:#eee url("+s(o("XdIS"))+") no-repeat 0;background-size:.3rem auto}.area-text[data-v-3c562007]{font-size:.3rem;padding:0 .21rem}",""])},"8inF":function(e,t,o){var s=o("06Ng");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o("FIqI")("23af0fd0",s,!0,{})},Pdj7:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o("vY6+");var s=o("1l6p"),a={name:"machineApply",data:function(){return{title:"机具申请",receivemCode:"",receiveName:"",receiveTel:"",posType:"",posModelCode:"",posTypeText:"",posModelCodeText:"",applyType:1,applyNum:1,tabJson:[],coeeArr1:"",coeeArr2:"",posItem:[],chooseAll:!1,showScanBox:!1,showPosBox:!1}},computed:{getPosItem:function(){for(var e="",t=0;t<this.posItem.length;t++)e+=this.posItem[t].value,t<this.posItem.length-1&&(e+=",");return e}},created:function(){this.$Progress.start(),this.$bridge.callhandler("API_NAVIGATION_JUMP",{themeColor:"#2A2F33",titleColor:1,isHomePage:0},function(e){}),this.init()},methods:{init:function(){var e=this;if(window.sessionStorage.getItem("receiveUser")){var t=JSON.parse(window.sessionStorage.getItem("receiveUser"));e.receivemCode=t.receivemCode,e.receiveName=t.receiveName,e.receiveTel=t.receiveTel}Object(s.g)({data:{token:e.$store.state.token}}).then(function(t){for(var o in t.data)e.tabJson.push(t.data[o]);e.$Progress.finish()})},scanFn:function(e){var t=this,o=e;t.$bridge.callhandler("API_SCANCODE",{},function(e){o?1==o?t.coeeArr1=JSON.parse(e).codeResult:t.coeeArr2=JSON.parse(e).codeResult:t.posItem.push({choose:!1,value:JSON.parse(e).codeResult})})},sureScan:function(){""==this.codeArr1||""==this.codeArr2?this.$alert({content:"请录入完整的设备信息！",sure:function(){}}):(this.posItem.push({choose:!1,value:this.codeArr1+"-"+this.codeArr2}),this.closeScanBox())},closeScanBox:function(){this.codeArr1=this.codeArr2="",this.showScanBox=!1},changedFn:function(){""===this.applyNum||this.applyNum<1?this.applyNum=1:this.applyNum=this.applyNum.toFixed(0)},chooseTypeFn:function(e){this.applyType=e},reduce:function(){this.applyNum>1&&this.applyNum--},plus:function(){this.applyNum++},choosePosAll:function(){this.chooseAll=!this.chooseAll,this.setPosItem(this.chooseAll)},choosePos:function(e){this.posItem[e].choose=!this.posItem[e].choose,this.isChooseAll()},isChooseAll:function(){for(var e=!0,t=0;t<this.posItem.length;t++)this.posItem[t].choose||(e=!1);this.chooseAll=e},closePos:function(){this.showPosBox=!1,this.chooseAll=!1,this.setPosItem(!1)},setPosItem:function(e){for(var t=0;t<this.posItem.length;t++)this.posItem[t].choose=e},deletePos:function(){for(var e=0;e<this.posItem.length;e++)this.posItem[e].choose&&(this.posItem.splice(e,1),e--);this.showPosBox=!1,this.chooseAll=!1},getTypeData:function(){for(var e=[],t=0;t<this.tabJson.length;t++)e.push({text:this.tabJson[t].name,value:this.tabJson[t].id});return e},getModelData:function(){var e=[];if(""==this.posType)for(var t=0;t<this.tabJson.length;t++)for(var o=0;o<this.tabJson[t].posModels.length;o++)e.push({text:this.tabJson[t].posModels[o].posModel,value:this.tabJson[t].posModels[o].code});else{for(var s=0,a=0;a<this.tabJson.length;a++)this.tabJson[a].id==this.posType&&(s=a);for(var i=0;i<this.tabJson[s].posModels.length;i++)e.push({text:this.tabJson[s].posModels[i].posModel,value:this.tabJson[s].posModels[i].code})}return e},choosePosType:function(){this.pickerType||(this.pickerType=this.$createPicker({title:"请选择",data:[this.getTypeData()],onSelect:this.selectTypeHandle})),this.pickerType.show()},selectTypeHandle:function(e,t,o){this.posTypeText!=o.join("")&&(this.posModelCodeText=this.posModelCode=""),this.posTypeText=o.join(""),this.posType=e.join(", ")},choosePosModel:function(){this.pickerModel=null,this.pickerModel=this.$createPicker({title:"请选择",data:[this.getModelData()],onSelect:this.selectModelHandle}),this.pickerModel.show()},selectModelHandle:function(e,t,o){this.posModelCodeText=o,this.posModelCode=e.join(", ")},getPosArr:function(){for(var e="",t=0;t<this.posItem.length;t++)e+=this.posItem[t].value,t<this.posItem.length-1&&(e+=",");return e},savePos:function(){var e=this;if(""===e.receiveName)return e.$alert({content:"请输入被申请人姓名！",sure:function(){}}),!1;if(!e.isPhoneNum(e.receiveTel))return e.$alert({content:"请输入正确的手机号！",sure:function(){}}),!1;if(""===e.posType)return e.$alert({content:"请选择设备品牌！",sure:function(){}}),!1;if(""===e.posModelCode)return e.$alert({content:"请选择设备型号！",sure:function(){}}),!1;if(1===e.applyType&&0===e.posItem.length)return e.$alert({content:"请录入设备编号！",sure:function(){}}),!1;var t={token:e.$store.state.token,receiveName:e.receiveName,receiveTel:e.receiveTel,posType:e.posType,posModelCode:e.posModelCode,applyType:e.applyType,applyNum:e.applyNum,ids:e.getPosArr()};Object(s.t)({data:t}).then(function(t){e.Toast({message:"申请成功！",duration:2e3}),e.$router.go(-1)}).catch(function(t){e.$alert({content:t.message,sure:function(){var e=document.getElementsByClassName("mint-toast")[0];e&&e.parentNode.removeChild(e)}})})}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{directives:[{name:"title",rawName:"v-title",value:e.title,expression:"title"}],staticClass:"machineApply"},[o("p",{staticClass:"form-title"},[e._v("请填写被申请人信息")]),e._v(" "),o("section",{staticClass:"form-box color333"},[o("section",{staticClass:"form-control flex"},[e._m(0),e._v(" "),o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"},{name:"model",rawName:"v-model",value:e.receiveName,expression:"receiveName"}],staticClass:"form-input",attrs:{type:"text",placeholder:"请输入被申请人姓名",readonly:""!=e.receivemCode&&"readonly"},domProps:{value:e.receiveName},on:{input:function(t){t.target.composing||(e.receiveName=t.target.value)}}})]),e._v(" "),o("section",{staticClass:"form-control flex"},[o("p",{staticClass:"label bold"},[e._v("手机号：")]),e._v(" "),o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"},{name:"model",rawName:"v-model",value:e.receiveTel,expression:"receiveTel"}],staticClass:"form-input",attrs:{maxlength:"11",type:"number",placeholder:"请输入被申请人手机号",readonly:""!=e.receivemCode&&"readonly",oninput:"if(value.length>11)value=value.slice(0,11)",onkeyup:"value=value.replace(/[^\\d\\.]/g,'')",onblur:"value=value.replace(/[^\\d\\.]/g,'')"},domProps:{value:e.receiveTel},on:{input:function(t){t.target.composing||(e.receiveTel=t.target.value)}}})])]),e._v(" "),o("p",{staticClass:"form-title"},[e._v("机具信息")]),e._v(" "),o("section",{staticClass:"form-box color333"},[o("section",{staticClass:"form-control flex"},[o("p",{staticClass:"label bold"},[e._v("设备品牌：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.posTypeText,expression:"posTypeText"}],staticClass:"form-input right-arr",attrs:{type:"text",readonly:"",placeholder:"请选择您需要的机具品牌"},domProps:{value:e.posTypeText},on:{click:e.choosePosType,input:function(t){t.target.composing||(e.posTypeText=t.target.value)}}})]),e._v(" "),o("section",{staticClass:"form-control flex"},[o("p",{staticClass:"label bold"},[e._v("设备型号：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.posModelCodeText,expression:"posModelCodeText"}],staticClass:"form-input right-arr",attrs:{type:"text",readonly:"",placeholder:"请选择您需要的机具型号"},domProps:{value:e.posModelCodeText},on:{click:e.choosePosModel,input:function(t){t.target.composing||(e.posModelCodeText=t.target.value)}}})])]),e._v(" "),o("section",{staticClass:"content"},[o("section",{staticClass:"tab color333 flex"},[o("section",{staticClass:"choose-tab",on:{click:function(t){return e.chooseTypeFn(1)}}},[o("span",{class:1===e.applyType?"on":""},[e._v("持有设备，录入编号申请")])]),e._v(" "),o("section",{staticClass:"choose-tab",on:{click:function(t){return e.chooseTypeFn(0)}}},[o("span",{class:0===e.applyType?"on":""},[e._v("无设备，填写申请数量")])])]),e._v(" "),o("section",{staticClass:"area"},[1===e.applyType?o("section",[o("section",{staticClass:"area-head flex"},[o("p",{staticClass:"bold color333"},[e._v("设备编号")]),e._v(" "),o("section",{staticClass:"item-right flex"},[o("button",{staticClass:"colorfff",on:{click:function(t){return e.scanFn(0)}}},[e._v("扫一扫录入")]),e._v(" "),o("button",{staticClass:"colorfff",on:{click:function(t){e.showScanBox=!0}}},[e._v("输入号段录入")])])]),e._v(" "),o("section",{staticClass:"all-machine"},[o("section",{staticClass:"flex"},[o("p",{staticClass:"area-all-title color9d"},[e._v("已录入设备")]),e._v(" "),e.posItem.length>0?o("button",{staticClass:"item-right",on:{click:function(t){e.showPosBox=!0}}},[e._v("编辑")]):e._e()]),e._v(" "),o("p",{staticClass:"area-all color9d"},[e._v(e._s(e.getPosItem))])]),e._v(" "),e.showPosBox?o("section",{staticClass:"cover"},[o("section",{staticClass:"area-show-box"},[o("section",{staticClass:"show-box-head flex"},[o("p",{staticClass:"bold color333"},[e._v("已录入设备信息")]),e._v(" "),o("button",{staticClass:"item-right close-btn",on:{click:e.closePos}})]),e._v(" "),o("section",{staticClass:"show-box-list"},[o("section",{staticClass:"show-machine-li",class:e.chooseAll?"on":"",on:{click:e.choosePosAll}},[o("p",{staticClass:"bold color333"},[e._v("全选")])]),e._v(" "),e._l(e.posItem,function(t,s){return o("section",{key:s,staticClass:"show-machine-li",class:t.choose?"on":"",on:{click:function(t){return e.choosePos(s)}}},[o("p",{staticClass:"bold color333"},[e._v(e._s(t.value))])])})],2),e._v(" "),o("section",{staticClass:"show-footer flex"},[o("button",{staticClass:"foot-close color9d",on:{click:e.closePos}},[e._v("取消")]),e._v(" "),o("button",{staticClass:"foot-delete colorfff",on:{click:e.deletePos}},[e._v("移除选中设备")])])])]):e._e()]):o("section",[o("section",{staticClass:"form-control flex"},[o("p",{staticClass:"label bold"},[e._v("机具数量")]),e._v(" "),o("section",{staticClass:"num-box color333 item-right flex"},[o("p",{staticClass:"bold",on:{click:e.reduce}},[e._v("-")]),e._v(" "),o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"},{name:"model",rawName:"v-model",value:e.applyNum,expression:"applyNum"}],staticClass:"num-input",attrs:{min:"1",type:"number"},domProps:{value:e.applyNum},on:{change:e.changedFn,input:function(t){t.target.composing||(e.applyNum=t.target.value)}}}),e._v(" "),o("p",{staticClass:"bold",on:{click:e.plus}},[e._v("+")])])])]),e._v(" "),o("section",{staticClass:"form-control flex hide"},[o("p",{staticClass:"label bold"},[e._v("申请描述(选填)")]),e._v(" "),o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"}],staticClass:"form-input",attrs:{type:"text"}})])])]),e._v(" "),e.showScanBox?o("section",{staticClass:"cover"},[o("section",{staticClass:"search-cover"},[o("button",{staticClass:"closeBtn",on:{click:e.closeScanBox}}),e._v(" "),o("p",{staticClass:"search-title color333"},[e._v("录入设备号段")]),e._v(" "),o("section",{staticClass:"scan-area flex"},[o("section",{staticClass:"relative"},[o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"},{name:"model",rawName:"v-model",value:e.codeArr1,expression:"codeArr1"}],staticClass:"scan-btn color333",attrs:{type:"number",placeholder:"起始设备号"},domProps:{value:e.codeArr1},on:{input:function(t){t.target.composing||(e.codeArr1=t.target.value)}}}),e._v(" "),o("button",{staticClass:"scanBt",on:{click:function(t){return e.scanFn(1)}}})]),e._v(" "),o("p",{staticClass:"area-text bold color333"},[e._v("至")]),e._v(" "),o("section",{staticClass:"relative"},[o("input",{directives:[{name:"reset-page",rawName:"v-reset-page"},{name:"model",rawName:"v-model",value:e.codeArr2,expression:"codeArr2"}],staticClass:"scan-btn color333",attrs:{type:"number",placeholder:"终止设备号"},domProps:{value:e.codeArr2},on:{input:function(t){t.target.composing||(e.codeArr2=t.target.value)}}}),e._v(" "),o("button",{staticClass:"scanBt",on:{click:function(t){return e.scanFn(2)}}})])]),e._v(" "),o("section",{staticClass:"search-footer flex"},[o("button",{staticClass:"color9d",on:{click:e.closeScanBox}},[e._v("取消")]),e._v(" "),o("button",{staticClass:"colorEA",on:{click:e.sureScan}},[e._v("确定")])])])]):e._e(),e._v(" "),o("button",{staticClass:"footer-btn colorfff",on:{click:e.savePos}},[e._v("提交申请")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"label bold"},[this._v("姓"),t("span",{staticClass:"vhide"},[this._v("名")]),this._v("名：")])}]};var n=o("C7Lr")(a,i,!1,function(e){o("8inF")},"data-v-3c562007",null);t.default=n.exports},Qo9Y:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAUVBMVEUAAACpp6epp6epp6eno6OqqKiqp6epp6eopqapp6eop6erpqaqpqaopKSqp6eop6epp6epp6espqappqapp6epp6eppqapp6epp6epp6epp6cxAK7zAAAAGnRSTlMA+B+pIfOteGZaUyUbFeO5pW0MpNt8c+S6boGD9u4AAADOSURBVCjPdVLZEoMgDAyXIqIiHq37/x9a0kJlmHEfPLIkm02gDN0vsxDz0muqIQP+CPKODwYiOBmjdEHADCV+AsqXH6+AM58HVqqwAt8caXDxe7SHHYlxwbCOgkrPqQOjm6iENIRP8R0/7Mx4AU09tvTZoaDjlA09LXCpPm6wjsObXkhCtiIsN4SZBCLRURFHIiIEE01GJrhUq8GlWLzpKotzu60PbjcbrJxng9l/PasSkiYPtxqvkU9jf15Uvdqkp912r7a9DEoS4/H6fABrMxeResU8NgAAAABJRU5ErkJggg=="},XdIS:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeBAMAAADJHrORAAAALVBMVEUAAADNzc3Nzc3Nzc3Nzc3Ozs7Nzc3Nzc3Nzc3Ozs7Nzc3Nzc3Nzc3MzMzNzc3O/WECAAAADnRSTlMA9NfN1uekaWP4qJlvnwBLPmoAAABRSURBVBjTY4h7BwSvGRgY1oEYTxkeKgGBO5B/BMSYx/CYARnoDTDfjyEDhV/GQAgYCiIDYQw+IbAChVeL7p4BDx9wfHkAmYfA8YWIzzxwfAIAk3MzQ8B7jsgAAAAASUVORK5CYII="},YBvg:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAgVBMVEUAAAAjGBUfAAAiFxQiGBQYFxYiFxQhGBQiGBQiFxQfDw8hFxMiFxQiFxQhFhQgFBMiFhQhFxMcFQwiFxUiFxQhFxMhFxMiGBMgFRIhFhAiGBQiGBQiFxMiFRQAAAAiGBQiGBQjFxEiFxQiFxQiFhMgFBMhFhMhGBUfFhIiFxQiGBTxzwR5AAAAK3RSTlMAxweblgq+kcF+EECleGQYPDYUuYeDa14jHqqhdDICtYssw3BGKFtVOLKNMbwyjAAAAdlJREFUOMuN1dmWmzAMBmD9TmLsYU2AsIclQ5r2/R+w46mHAwg41Q1gPhRb8nFoFZfo/qeMlYq9LngLOop3ojALmV53qesBaNNXNBbFGL3SFoAXbdLiDEi/nw81WgFOyO2nhHp+rEdv9QDprkfvwKmgjcgrIFgO+cDzQZshzLtV3l+0G9ki9yezTE/zLuTyd3j4kD81OeP0OMaigvMzCWXrEGqxar6+2ZoM+NedEndrS5zFwp5QWl2jMpcI0vYiBayeLKBtdxTMPulQTy8nzR810q8hhZG/5p82kIJc/CZimll6xLjSHZqYtjfOfLkJAnJM85jmljJ0VH5l55pbcuGRRE5cc0s9WgJC4ppbKqA28Mc3Pm9hiZxbq9k0zAKZdb5XyRZoSsetuHCdITFN4ZY10DbFtJvZvXZfFHpuub5CCpPeX1urz8stqtnmn/dCGO1Pm78xVw9PO1BaO9OeTeSjsgVUudW+WJ9G1o4D3v99FHjo7G0oUR9jjTicHV+vIxsA7uJgfB3abP5cA7XYma8G7uzrKt+yo2fy8r+Job6tR0MfiCOeInQApZtZER/XdAA6k4FHVAGIk8zt87x3sy4GcHrTXjSpxCykbo57dQ0Sr5WyrZKgWdfnL91MGTioGNJgAAAAAElFTkSuQmCC"},fItf:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAATlBMVEUAAADqPT3qPz/qPj7rPj7rPj7qPz/rPz/qPj7qPj7sPT3sPDztOjreLCzpPj7qPj7qPz/qPj7qPz/qPj7rPj7pPj7qPz/rPDzqPj7qPz/TPSJHAAAAGXRSTlMAH/h5qKXz5K1aUxsVBWe5bSXbqnO6biZj4HkjKQAAAMxJREFUKM99klcOgzAQRNcVQm8hmftfNMvEiokleB8Iebxt1pIwbqysrUZn5IwJ+OFP0iPChsb0vWmCRXxIYgPWVhLtCmzpPjDJiQlgjInYRZkH935R2RGPOh6rfrsaB3UnPPIaANvq+YIvy6G0FkYcgv7yPqlFCXAyotH8yMwqNHhKBS00IDPIkb8Si140X8ap0MNSKCIoMFVRg6lYvOiKxdluMQfb5YDl5ByQliSvBnpFS2gizf2zN5o727konxflge1qtbeP4fL5fADF+BY2LOeBGQAAAABJRU5ErkJggg=="}});